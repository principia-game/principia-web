{% extends "_layout.twig" %}

{% block title %}{{ level.title }}{% endblock %}

	{% block content %}
{% if already_entered %}
	<div class="header_message">You've already entered this level into the <b>{{ contest_entered }}</b> contest.</div>
{% elseif contest_entered %}
	<div class="header_message">Your level has been successfully entered into the <b>{{ contest_entered }}</b> contest!</div>
{% endif %}
<h1>{{ level.title }}</h1>
<span class="misc">
	  {{ userlink(level, 'u_') }}
	- {{ level.cat | cat_to_type | title }} level
	- {{ level.time | date('M j, Y') }} from {{ level.platform }}</span>
<div class="lvl-box">
	<div class="info">
		<div id="buttons">
			<a class="play" href="principia://play/lvl/db/{{ lid }}">Play</a>
			{% if level.derivatives %}
				<a class="play play-edit" href="principia://sandbox/db/{{ lid }}">Edit</a>
			{% endif %}
			{% if log %}
				{% if not has_liked %}
					<button class="play" id="btn_like" onclick="vote(this, {{ level.id }})">Like</button>
				{% endif %}
			{% endif %}
			<span class="likemsg">{{ level.likes }} players liked this.</span>
		</div>
		<p>{{ level.description | raw }}</p>
	</div>
	<div class="img">
		<img src="levels/thumbs/{{ level.id }}.jpg">
	</div>
</div>
<div class="lvl-data">
	<p>
		Views: {{ level.views }}
		Downloads: {{ level.downloads }}
		Level ID: {{ level.id }}
	</p>
	{% if userdata.id == level.author and contests %}
		<form method="POST" style="display:inline-block;">
			<p>Add to contest:
			<select name="addtocontest" onchange="this.form.submit()">
				<option value="-1" selected>- None selected -</option>
				{% for contest in contests %}<option value="{{ contest.id }}">{{ contest.title }}</option>{% endfor %}
			</select></p>
		</form>
	{% endif %}
</div>

<h2>Comments</h2>
{{ comments(comments, 'level', level.id) }}
<br>
	{% endblock %}